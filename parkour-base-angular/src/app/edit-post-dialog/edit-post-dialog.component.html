<h1 mat-dialog-title>{{ isCreating ? "Create" : "Edit" }} post</h1>
<mat-dialog-content>
  <form onsubmit="event.preventDefault()">
    <mat-form-field>
      <mat-label>Title</mat-label>
      <input
        type="text"
        matInput
        name="title"
        (keyup)="hasChanged = true"
        [(ngModel)]="postTitle"
      />
    </mat-form-field>
    <mat-tab-group>
      <mat-tab label="Upload Media">
        <div class="upload-media-box">
          <button
            mat-mini-fab
            id="attachMedia"
            class="mini-fab"
            (click)="imageInput.click()"
          >
            <mat-icon>attach_file</mat-icon>
          </button>
          <mat-form-field>
            <input
              #imageInput
              hidden="true"
              type="file"
              onclick="this.value=null"
              (change)="onSelectImage($event.target.files)"
            />
            <mat-label>Upload Media</mat-label>
            <input
              #filenameInput
              matInput
              name="media"
              type="text"
              ng-readonly="true"
              (click)="imageInput.click()"
              readonly
              [value]="uploadFileName"
            />
            <mat-icon matSuffix>cloud_upload</mat-icon>
            <mat-hint>{{
              uploadFile
                ? "Size: " + uploadFileSizeString + ", Type: " + uploadFile.type
                : "Click to select media"
            }}</mat-hint>
          </mat-form-field>
        </div>
      </mat-tab>
      <mat-tab label="Link Media">
        <span class="mat-small"
          >Link YouTube videos, Vimeo videos, pictures and .mp4 videos.</span
        >
        <mat-form-field>
          <mat-label>Link Media</mat-label>
          <input #linkInput matInput name="link" type="text" />
          <mat-icon matSuffix>link</mat-icon>
          <mat-hint>{{
            false ? "Platform: " + "TODO" : "Enter a media link"
          }}</mat-hint>
        </mat-form-field>
      </mat-tab>
    </mat-tab-group>
    <mat-form-field>
      <mat-label>
        Content
      </mat-label>
      <textarea
        #content
        matInput
        name="content"
        (keyup)="hasChanged = true"
        [(ngModel)]="postBody"
      ></textarea>
      <mat-hint>{{ content.value.length }} / 1024</mat-hint>
    </mat-form-field>
  </form>
</mat-dialog-content>
<mat-dialog-actions>
  <button mat-flat-button [color]="hasChanged ? 'warn' : ''" (click)="close()">
    {{ hasChanged ? "Discard" : "Cancel" }}
  </button>
  <div class="spacer"></div>
  <button
    mat-flat-button
    color="accent"
    [disabled]="!hasChanged"
    [mat-dialog-close]="makePostToReturn()"
  >
    Post
  </button>
</mat-dialog-actions>
