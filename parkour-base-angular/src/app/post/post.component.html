<mat-card
  *ngIf="post"
  class="text-left mat-elevation-z5"
  ng-class="{mat-elevation-z0: !showCard}"
>
  <mat-card-header>
    <mat-card-title>{{ post.title }}</mat-card-title>
    <mat-card-subtitle>
      <span>
        <a href="/users/{{ post.user.uid }}">{{
          post.user.display_name || "A Traceur"
        }}</a>
      </span>
      <span>{{ timeAgoString }}</span></mat-card-subtitle
    >
  </mat-card-header>
  <img
    mat-card-image
    *ngIf="post.mediaSrc && post.mediaIsImage"
    src="{{ post.mediaSrc }}"
    [alt]="post.title + ' Image'"
  />
  <mat-video
    *ngIf="post.mediaSrc && !post.mediaIsImage"
    class="mat-card-video"
    [quality]="false"
    color="accent"
    [src]="post.mediaSrc"
    [keyboard]="false"
  ></mat-video>
  <mat-card-content>{{ post.body }}</mat-card-content>
  <mat-card-actions>
    <div class="mr-2">
      <button color="accent" mat-icon-button (click)="likeButtonPress(post)">
        <mat-icon [color]="likedByUser ? 'accent' : 'primary'">
          thumb_up
        </mat-icon>
      </button>
      <strong class="mat-b">{{ post.likeCount || 0 }}</strong>
    </div>

    <div *ngIf="false" class="mr-2">
      <button mat-icon-button>
        <mat-icon color="primary">comment</mat-icon>
      </button>
      <span>{{ post.commentCount || 0 }}</span>
    </div>

    <button *ngIf="false" mat-icon-button>
      <mat-icon color="primary">share</mat-icon>
    </button>

    <div class="spacer"></div>

    <button mat-icon-button [matMenuTriggerFor]="postMenu">
      <mat-icon color="primary">more_horiz</mat-icon>
    </button>
  </mat-card-actions>
</mat-card>

<mat-menu #postMenu="matMenu">
  <button mat-menu-item>
    <mat-icon>info</mat-icon>
    <span>More Information</span>
  </button>
  <button *ngIf="true" mat-menu-item>
    <mat-icon>place</mat-icon>
    <span>Open on Map</span>
  </button>
  <button mat-menu-item disabled="true">
    <mat-icon>report</mat-icon>
    <span>Report post</span>
  </button>
  <button *ngIf="true" mat-menu-item>
    <mat-icon>delete</mat-icon>
    <span>Delete post</span>
  </button>
</mat-menu>
